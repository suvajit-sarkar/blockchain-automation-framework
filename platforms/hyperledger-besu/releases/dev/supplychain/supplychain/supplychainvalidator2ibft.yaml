apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: supplychainvalidator2ibft
  namespace: supplychain-bes
  annotations:
    flux.weave.works/automated: "false"
spec:
  releaseName: supplychainvalidator2ibft
  chart:
    git: git@github.com:suvajit-sarkar/blockchain-automation-framework.git
    ref: develop
    path: platforms/hyperledger-besu/charts/node_validator 
  values:
    replicaCount: 1

    healthcheck:
      readinessthreshold: 100
      readinesscheckinterval: 5

    staticnodes:
      - "enode://6e011f98c8b3b19212105da11e473af0d22d0fff91144dc8bb352b26661f3e0ef787d1fb7072bc3dd8cea2c42f3fe6931a5e8eb25f04d53613127dca3794c23c@validator1.supplychain-bes:30303"
      
      - "enode://6f127acff81ffd10124f6c5aa9ae49414c98214adb3ed36b83daf60906da189aad1a9ff8e34d58d1b7b4b9be57a41b71f07fe9163ff4fe77ee2d22e4265268f7@validator2.supplychain-bes:30303"
      
      - "enode://a42a64026268e652f80a088939c9cae19195ba3d803a76af8dfcb77eae67894e27a1e8622a19f9e738498d371a8ff4203f07a7e1837ac6568d972adb6bf5ebed@validator3.supplychain-bes:30303"
      
      - "enode://ed21334b071eff3670a11008859b60b1cbd1ba844dccb92a5842561547a312a30363a4d7472169a4ab6b839d5c6524ef7c1fea2b39e18621ffbba396f84fa7b2@validator4.supplychain-bes:30303"
      
      - "enode://ff8d16435a2c24e75d5cee53a433f827ea162b58fc6d2337d4ebf5bc4b6369ff2e94029ab0d50c5ecb2a3d12792ce7d1e59941a3a9077db37a748198f493daa6@carrier.carrier-bes:30303"
      
      - "enode://84e21127836908b5bfeec2c4c56c454122cb996f7d05a2ae820561488a4df3a392beda57bbc2586483d6cb395daef9b422de24200d1c9dcceb7beba7b659e2bf@manufacturer.manufacturer-bes:30303"
      

    metadata:
      namespace: supplychain-bes
      labels:

    ambassador:
      external_url_suffix: supplychain-bes

    liveliness_check:
      enabled: false

    proxy:
      provider: none
      external_url: supplychain.supplychain-bes
      p2p: 15012
      rpc: 15013

    images:
      node: hyperledger/besu:21.1.1
      alpineutils: hyperledgerlabs/alpine-utils:1.0

    node:
      name: validator2
      tls: True
      consensus: ibft
      mountPath: /opt/besu/data
      servicetype: ClusterIP
      imagePullSecret: regcred
      ports:
        p2p: 30303
        rpc: 8545
        ws: 8546

    storage:
      storageclassname: awsstorageclass
      storagesize: 1Gi

    vault:
      address: http://vault.internal.dev2.aws.blockchaincloudpoc-develop.com:20001
      secretprefix: secret/supplychain-bes/crypto/validator2
      serviceaccountname: vault-auth
      keyname: data
      tlsdir: tls
      role: vault-role
      authpath: besusupplychain

    genesis: ewogICJjb25maWciOiB7CiAgICAiY2hhaW5JZCI6IDIwMTgsCiAgICAiY29uc3RhbnRpbm9wbGVmaXhibG9jayI6IDAsCiAgICAiY29udHJhY3RTaXplTGltaXQiOiAyMTQ3NDgzNjQ3LAogICAgImliZnQyIjogewogICAgICAiYmxvY2twZXJpb2RzZWNvbmRzIjogMiwKICAgICAgImVwb2NobGVuZ3RoIjogMzAwMDAsCiAgICAgICJyZXF1ZXN0dGltZW91dHNlY29uZHMiOiAxMAogICAgfQogIH0sCiAgIm5vbmNlIjogIjB4MCIsCiAgInRpbWVzdGFtcCI6ICIweDU4ZWU0MGJhIiwKICAiZ2FzTGltaXQiOiAiMHgxZmZmZmZmZmZmZmZmZiIsCiAgImRpZmZpY3VsdHkiOiAiMHgxIiwKICAiZXh0cmFEYXRhIjogIjB4Zjg3ZWEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGY4NTQ5NDM5NGRjNjQ4NTQ0Mjc4MmVhOTRmNTczZjNlNjE1NTkyZTFjNWMxMGE5NDg3ZWU3MTEzYTQ2NDBiNmY3MDk5M2Q2YjI5YWMwMWQ5OTk2ZjQ3NWU5NDQxMDcwNDVkY2EwMGQ0NTBmYWJkZGZjOGRmZmE1MzMwZDQxMDc1MjE5NGUzZmJkYTVhNTY3ZWUwMjkwYTViMjljNDQ0ZDdlZGI1MGVhMDRkMzQ4MDg0MDAwMDAwMDBjMCIKfQ==
